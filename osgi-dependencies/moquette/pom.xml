<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	
	<parent>
		<artifactId>osgi-dependencies</artifactId>
        <groupId>com.nsn.cumulocity.dependencies.osgi</groupId>
		<version>7.32.0-SNAPSHOT</version>
	</parent>
	
	<artifactId>moquette</artifactId>
	<version>${osgi.moquette.version}</version>
	<name>Cumulocity Dependencies :: OSGi Dependencies :: Moquette</name>
    <url>http://startups.jira.com/wiki/display/MTM/Home</url>
	<packaging>jar</packaging>

	<repositories>
	 	 <repository>
		    <id>bintray</id>
		    <url>http://dl.bintray.com/andsel/maven/</url>
		    <releases>
		      <enabled>true</enabled>
		    </releases>
		    <snapshots>
		      <enabled>false</enabled>
		    </snapshots>
	  	</repository>
	</repositories>
	
	<dependencies>
		<dependency>
	      	<groupId>io.moquette</groupId>
	     	<artifactId>moquette-broker</artifactId>
	      	<scope>provided</scope>
	      	<exclusions>
				<exclusion>
					<artifactId>log4j</artifactId>
					<groupId>log4j</groupId>
				</exclusion>
				<exclusion>
					<artifactId>slf4j-log4j12</artifactId>
					<groupId>org.slf4j</groupId>
				</exclusion>
	      	</exclusions>
		</dependency>
		
		<dependency>
            <groupId>io.moquette</groupId>
            <artifactId>moquette-netty-parser</artifactId>
        </dependency>
       	
       	<dependency>
            <groupId>io.moquette</groupId>
            <artifactId>moquette-parser-commons</artifactId>
        </dependency>
        
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.10</version>
        </dependency>
        
        <dependency>
            <groupId>org.mapdb</groupId>
            <artifactId>mapdb</artifactId>
            <version>1.0.8</version>
        </dependency>

        <dependency>
            <groupId>org.hdrhistogram</groupId>
            <artifactId>HdrHistogram</artifactId>
            <version>2.1.4</version>
        </dependency>
        
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.10</version>
        </dependency>
		
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
        </dependency>
	</dependencies>
	
	<build>
	    <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>add-sources</id>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>add-source</goal>
                        </goals>
                        <configuration>
                            <sources>
                                <source>src/main/java</source>
                            </sources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <configuration>
                    <includeGroupIds>
                    	io.moquette,
                    	org.mapdb,
                    	org.hdrhistogram,
                    	commons-codec
                   	</includeGroupIds>
                    <includeArtifactIds>
                    	moquette-broker,
                    	moquette-netty-parser,
                    	moquette-parser-commons,
                    	mapdb,
                    	HdrHistogram,
                    	commons-codec
                   	</includeArtifactIds>
                    <excludes>
                        META-INF/MANIFEST.MF,
                        META-INF/maven/**/*,
                        io/moquette/spi/impl/ProtocolProcessor.*,
                        io/moquette/spi/impl/SimpleMessaging.*,
                        io/moquette/server/Server.*,
                        io/moquette/server/ConnectionDescriptor.*,
                        io/moquette/server/netty/NettyMQTTHandler.*,
                        io/moquette/server/netty/NettyUtils.*
                    </excludes>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                	<includes>
                       <include>io</include>
                       <include>io/moquette</include>
                       <include>io/moquette/spi</include>
                       <include>io/moquette/spi/impl</include>
                       <include>io/moquette/spi/impl/ProtocolProcessor.*</include>
                       <include>io/moquette/spi/impl/SimpleMessaging.*</include>
                       <include>io/moquette/server</include>
                       <include>io/moquette/server/Server.*</include>
                       <include>io/moquette/server/ConnectionDescriptor.*</include>
                       <include>io/moquette/server/netty</include>
                       <include>io/moquette/server/netty/ServerChannel.*</include>
                       <include>io/moquette/server/netty/NettyUtils.*</include>
                       <include>io/moquette/server/netty/NettyMQTTHandler.*</include>
                       <include>io/moquette/spi/security</include>
                       <include>io/moquette/spi/security/IMessagingPolicy.*</include>
                       <include>io/moquette/spi/persistence</include>
	                </includes>
	                <excludes>
	                    <exclude>nothing</exclude>
	                </excludes>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <configuration>
                    <instructions>
                    	<Export-Package>
							io.moquette.*,
							org.mapdb.*,
							org.HdrHistogram.*
						</Export-Package>
                        <Import-Package>
                            !io.moquette.*,
                            *
                        </Import-Package>
                    </instructions>
                </configuration>
            </plugin>
	    </plugins>
	</build>
	
</project>
